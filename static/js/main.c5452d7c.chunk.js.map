{"version":3,"sources":["Pointer.tsx","PointerOne.tsx","PointerThree.tsx","PointerTwo.tsx","PointerMiddle.tsx","State.tsx","PointerComponent.tsx","Keyboard.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Pointer","label","active","subPointers","initial","current","diff","logEl","markEl","this","THREE","set","el","log","innerText","JSON","stringify","Math","round","x","y","updateMark","style","display","left","top","PointerOne","p1","copy","sub","PointerThree","p2","p3","add","divideScalar","PointerTwo","initialBetween","between","PointerMiddle","e","clientX","clientY","State","canvas","pressed","pointers","extraPointers","lastPointerButtonPressed","width","window","innerWidth","height","innerHeight","SubPointer","state","id","pointerId","push","length","start","slice","end","move","index","getPointerIndexById","splice","PointerComponent","useEffect","handlePointerMove","pointer","getPointerById","handlePointerDown","button","setPointerCapture","handlePointerUp","remove","releasePointerCapture","handleMousewheel","addEventListener","passive","removeEventListener","map","indexOf","Keyboard","downHandler","press","key","toLowerCase","repeat","upHandler","App","canvasRef","useRef","pointerOneRef","pointerTwoRef","pointerThreeRef","markOneRef","markTwoRef","markThreeRef","useState","_state","setState","setLogEl","setMarkEl","position","userSelect","pointerEvents","ref","className","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"mOA2EeA,E,WA9Db,WAAYC,GAAgB,yBAT5BC,YAS2B,OAR3BC,iBAQ2B,OAP3BC,aAO2B,OAN3BC,aAM2B,OAL3BC,UAK2B,OAJ3BL,WAI2B,OAH3BM,WAG2B,OAF3BC,YAE2B,EACzBC,KAAKR,MAAQA,EACbQ,KAAKP,QAAS,EACdO,KAAKN,YAAc,KACnBM,KAAKL,QAAU,IAAIM,IACnBD,KAAKJ,QAAU,IAAIK,IACnBD,KAAKH,KAAO,IAAII,IAChBD,KAAKF,MAAQ,KACbE,KAAKD,OAAS,K,yCAGhB,SAAML,GACJM,KAAKP,QAAS,I,iBAGhB,WACEO,KAAKP,QAAS,EACdO,KAAKJ,QAAQM,IAAI,EAAG,GACpBF,KAAKH,KAAKK,IAAI,EAAG,K,sBAGnB,SAASC,GACPH,KAAKF,MAAQK,EACbH,KAAKI,Q,iBAGP,WACqB,OAAfJ,KAAKF,QACPE,KAAKF,MAAMO,UACTL,KAAKR,MACL,IACAc,KAAKC,UAAUP,KAAKP,QACpB,SACAe,KAAKC,MAAMT,KAAKH,KAAKa,GACrB,IACAF,KAAKC,MAAMT,KAAKH,KAAKc,M,uBAI3B,SAAUR,GACRH,KAAKD,OAASI,EACdH,KAAKY,e,oBAGP,WACEZ,KAAKI,MACLJ,KAAKY,e,wBAGP,WACsB,OAAhBZ,KAAKD,SACHC,KAAKP,OACPO,KAAKD,OAAOc,MAAMC,QAAU,QAE5Bd,KAAKD,OAAOc,MAAMC,QAAU,OAE9Bd,KAAKD,OAAOc,MAAME,KAAOf,KAAKJ,QAAQc,EAAI,KAC1CV,KAAKD,OAAOc,MAAMG,IAAMhB,KAAKJ,QAAQe,EAAI,U,KCpChCM,E,kDA9Bb,WAAYzB,GAAgB,uCACpBA,G,yCAGR,SAAME,GACJ,6DAAYA,GACZM,KAAKN,YAAcA,EACnB,IAAOwB,EAAP,YAAalB,KAAKN,YAAlB,MACAM,KAAKL,QAAQwB,KAAKD,EAAGtB,SACrBI,KAAKJ,QAAQuB,KAAKD,EAAGtB,SACrBI,KAAKH,KAAKK,IAAI,EAAG,GACjB,iE,kBAGF,WACE,GAAIF,KAAKN,YAAa,CACpB,IAAOwB,EAAP,YAAalB,KAAKN,YAAlB,MACAM,KAAKJ,QAAQuB,KAAKD,EAAGtB,SACrBI,KAAKH,KAAKsB,KAAKnB,KAAKJ,SAASwB,IAAIpB,KAAKL,SAEtC,kE,iBAIJ,WACE,4DACA,mE,GA3BqBJ,GC0CV8B,E,kDAxCb,WAAY7B,GAAgB,uCACpBA,G,yCAGR,SAAME,GACJM,KAAKP,QAAS,EACdO,KAAKN,YAAcA,EACnB,kBAAqBA,EAArB,GAAOwB,EAAP,KAAWI,EAAX,KAAeC,EAAf,KAEAvB,KAAKJ,QACFuB,KAAKD,EAAGtB,SACR4B,IAAIF,EAAG1B,SACP4B,IAAID,EAAG3B,SACP6B,aAAa,GAChBzB,KAAKL,QAAQwB,KAAKnB,KAAKJ,SAEvBI,KAAKH,KAAKK,IAAI,EAAG,GACjB,iE,kBAGF,WACE,GAAIF,KAAKN,YAAa,CACpB,kBAAqBM,KAAKN,YAA1B,GAAOwB,EAAP,KAAWI,EAAX,KAAeC,EAAf,KACAvB,KAAKJ,QACFuB,KAAKD,EAAGtB,SACR4B,IAAIF,EAAG1B,SACP4B,IAAID,EAAG3B,SACP6B,aAAa,GAEhBzB,KAAKH,KAAKsB,KAAKnB,KAAKJ,SAASwB,IAAIpB,KAAKL,SACtC,kE,iBAIJ,WACE,4DACA,mE,GArCuBJ,GC2CZmC,E,kDAvCb,WAAYlC,GAAgB,IAAD,8BACzB,cAAMA,IAJRmC,oBAG2B,IAF3BC,aAE2B,EAEzB,EAAKA,QAAU,IAAI3B,IACnB,EAAK0B,eAAiB,IAAI1B,IAHD,E,yCAM3B,SAAMP,GACJ,6DAAYA,GACZM,KAAKN,YAAcA,EACnB,kBAAiBA,EAAjB,GAAOwB,EAAP,KAAWI,EAAX,KAEAtB,KAAKJ,QAAQuB,KAAKD,EAAGtB,SAAS4B,IAAIF,EAAG1B,SAAS6B,aAAa,GAC3DzB,KAAKL,QAAQwB,KAAKnB,KAAKJ,SAEvBI,KAAK4B,QAAQT,KAAKD,EAAGtB,SAASwB,IAAIE,EAAG1B,SACrCI,KAAK2B,eAAeR,KAAKnB,KAAK4B,SAE9B5B,KAAKH,KAAKK,IAAI,EAAG,GACjB,iE,kBAGF,WACE,GAAIF,KAAKN,YAAa,CACpB,kBAAiBM,KAAKN,YAAtB,GAAOwB,EAAP,KAAWI,EAAX,KACAtB,KAAKJ,QAAQuB,KAAKD,EAAGtB,SAAS4B,IAAIF,EAAG1B,SAAS6B,aAAa,GAE3DzB,KAAK4B,QAAQT,KAAKD,EAAGtB,SAASwB,IAAIE,EAAG1B,SAErCI,KAAKH,KAAKsB,KAAKnB,KAAKJ,SAASwB,IAAIpB,KAAKL,SACtC,kE,iBAIJ,WACE,4DACA,mE,GAvCqBJ,GC8BVsC,E,WA1Bb,aAAe,yBALfpC,YAKc,OAJdE,aAIc,OAHdC,aAGc,OAFdC,UAEc,EACZG,KAAKP,QAAS,EACdO,KAAKL,QAAU,IAAIM,IACnBD,KAAKJ,QAAU,IAAIK,IACnBD,KAAKH,KAAO,IAAII,I,yCAGlB,SAAM6B,GACJ9B,KAAKP,QAAS,EACdO,KAAKJ,QAAQM,IAAI4B,EAAEC,QAASD,EAAEE,SAC9BhC,KAAKL,QAAQwB,KAAKnB,KAAKJ,SACvBI,KAAKH,KAAKK,IAAI,EAAG,K,kBAGnB,SAAK4B,GACH9B,KAAKJ,QAAQM,IAAI4B,EAAEC,QAASD,EAAEE,SAC9BhC,KAAKH,KAAKsB,KAAKnB,KAAKJ,SAASwB,IAAIpB,KAAKL,W,iBAGxC,WACEK,KAAKP,QAAS,EACdO,KAAKJ,QAAQM,IAAI,EAAG,GACpBF,KAAKH,KAAKK,IAAI,EAAG,O,KCIN+B,EAjBb,WAAYC,GAA4B,yBAVxCA,YAUuC,OATvCC,aASuC,OARvCC,cAQuC,OAPvCC,mBAOuC,OANvCpB,gBAMuC,OALvCS,gBAKuC,OAJvCL,kBAIuC,OAHvCQ,mBAGuC,OAFvCS,8BAEuC,EACrCtC,KAAKkC,OAASA,EACdlC,KAAKmC,QAAU,GACfnC,KAAKoC,SAAW,GAChBpC,KAAKqC,cAAgB,GACrBrC,KAAKiB,WAAa,IAAIA,EAAW,OACjCjB,KAAK0B,WAAa,IAAIA,EAAW,OACjC1B,KAAKqB,aAAe,IAAIA,EAAa,SACrCrB,KAAK6B,cAAgB,IAAIA,EACzB7B,KAAKsC,yBAA2B,EAGhCtC,KAAKkC,OAAOK,MAAQC,OAAOC,WAC3BzC,KAAKkC,OAAOQ,OAASF,OAAOG,aCzBnBC,EAAb,WAKE,WAAYC,EAAcf,GAOxB,OAP0C,yBAJ5Ce,WAI2C,OAH3CC,QAG2C,OAF3ClD,aAE2C,EACzCI,KAAK6C,MAAQA,EACb7C,KAAK8C,GAAKhB,EAAEiB,UACZ/C,KAAKJ,QAAU,IAAIK,IAAc6B,EAAEC,QAASD,EAAEE,SAG9ChC,KAAK6C,MAAMT,SAASY,KAAKhD,MACjBA,KAAK6C,MAAMT,SAASa,QAC1B,KAAK,EAEHjD,KAAK6C,MAAM5B,WAAWiC,MAAMlD,KAAK6C,MAAMT,SAASe,MAAM,EAAG,IACzD,MACF,KAAK,EAEHnD,KAAK6C,MAAM5B,WAAWmC,MACtBpD,KAAK6C,MAAMnB,WAAWwB,MAAMlD,KAAK6C,MAAMT,SAASe,MAAM,EAAG,IACzD,MACF,QAEEnD,KAAK6C,MAAMnB,WAAW0B,MACtBpD,KAAK6C,MAAMxB,aAAa6B,MAAMlD,KAAK6C,MAAMT,SAASe,MAAM,EAAG,KAzBnE,wCA6BE,SAAKrB,GAEH,OADA9B,KAAKJ,QAAQM,IAAI4B,EAAEC,QAASD,EAAEE,SACtBhC,KAAK6C,MAAMT,SAASa,QAC1B,KAAK,EACHjD,KAAK6C,MAAM5B,WAAWoC,OACtB,MACF,KAAK,EACHrD,KAAK6C,MAAMnB,WAAW2B,OACtB,MACF,QACErD,KAAK6C,MAAMxB,aAAagC,UAvChC,oBA4CE,WACE,IAAMC,EAAQC,EAAoBvD,KAAK6C,MAAO7C,KAAK8C,IAInD,QAHe,IAAXQ,GACFtD,KAAK6C,MAAMT,SAASoB,OAAOF,EAAO,GAE5BtD,KAAK6C,MAAMT,SAASa,QAC1B,KAAK,EACHjD,KAAK6C,MAAM5B,WAAWmC,MACtB,MACF,KAAK,EAEHpD,KAAK6C,MAAMnB,WAAW0B,MACtBpD,KAAK6C,MAAM5B,WAAWiC,MAAMlD,KAAK6C,MAAMT,SAASe,MAAM,EAAG,IACzD,MACF,KAAK,EAEHnD,KAAK6C,MAAMxB,aAAa+B,MACxBpD,KAAK6C,MAAMnB,WAAWwB,MAAMlD,KAAK6C,MAAMT,SAASe,MAAM,EAAG,SA7DjE,KA2IeM,EAnEU,SAAC,GAA6B,IAA3BZ,EAA0B,EAA1BA,MAgE1B,OA/DAa,qBAAU,WACR,IAAQxB,EAAWW,EAAXX,OAEFyB,EAAoB,SAAC7B,GACzB,GAAuC,IAAnCe,EAAMP,yBAAgC,CACxC,IAAMsB,EAAUC,EAAehB,EAAOf,EAAEiB,WACpCa,GACFA,EAAQP,KAAKvB,QAE6B,IAAnCe,EAAMP,yBACXO,EAAMhB,cAAcpC,QACtBoD,EAAMhB,cAAcwB,KAAKvB,GAElBe,EAAMP,0BAKbwB,EAAoB,SAAChC,GACzBe,EAAMP,yBAA2BR,EAAEiC,OACI,IAAnClB,EAAMP,0BACR,IAAIM,EAAWC,EAAOf,GACtBI,EAAO8B,kBAAkBlC,EAAEiB,YACiB,IAAnCF,EAAMP,yBACfO,EAAMhB,cAAcqB,MAAMpB,GACjBe,EAAMP,yBAGjBJ,EAAO8B,kBAAkBlC,EAAEiB,YAGvBkB,EAAkB,SAACnC,GACvB,GAAuC,IAAnCe,EAAMP,yBAAgC,CACxC,IAAMsB,EAAUC,EAAehB,EAAOf,EAAEiB,WACpCa,GAASA,EAAQM,SACrBhC,EAAOiC,sBAAsBrC,EAAEiB,gBACa,IAAnCF,EAAMP,yBACfO,EAAMhB,cAAcuB,MACXP,EAAMP,0BAKb8B,EAAmB,SAACtC,KAE1B,GAAII,EAQF,OAPAA,EAAOmC,iBAAiB,cAAeP,GACvC5B,EAAOmC,iBAAiB,cAAeV,GACvCzB,EAAOmC,iBAAiB,YAAaJ,GACrC/B,EAAOmC,iBAAiB,gBAAiBJ,GACzC/B,EAAOmC,iBAAiB,aAAcD,EAAkB,CACtDE,SAAS,IAEJ,WACLpC,EAAOqC,oBAAoB,cAAeT,GAC1C5B,EAAOqC,oBAAoB,cAAeZ,GAC1CzB,EAAOqC,oBAAoB,YAAaN,GACxC/B,EAAOqC,oBAAoB,gBAAiBN,GAC5C/B,EAAOqC,oBAAoB,aAAcH,MAG5C,IAEI,MAKHb,EAAsB,SAACV,EAAcE,GAEzC,OADYF,EAAMT,SAASoC,KAAI,SAACZ,GAAD,OAAaA,EAAQd,MACzC2B,QAAQ1B,IAGfc,EAAiB,SAAChB,EAAcE,GACpC,IAAMO,EAAQC,EAAoBV,EAAOE,GACzC,OAAIO,GAAS,EACJT,EAAMT,SAASkB,GAEf,MC3HIoB,MA1Bf,YAA6C,IAAzB7B,EAAwB,EAAxBA,MAuBlB,OAtBAa,qBAAU,WACR,IAAMiB,EAAc,SAAC7C,GACnB,IAAI8C,EAAQ9C,EAAE+C,IAAIC,cACbhD,EAAEiD,QAAQlC,EAAMV,QAAQa,KAAK4B,IAG9BI,EAAY,SAAClD,GACjB,IAAI8C,EAAQ9C,EAAE+C,IAAIC,cACZxB,EAAQT,EAAMV,QAAQsC,QAAQG,IACrB,IAAXtB,GACFT,EAAMV,QAAQqB,OAAOF,EAAO,IAMhC,OAFAd,OAAO6B,iBAAiB,UAAWM,GACnCnC,OAAO6B,iBAAiB,QAASW,GAC1B,WACLxC,OAAO+B,oBAAoB,UAAWI,GACtCnC,OAAO+B,oBAAoB,QAASS,MAErC,IAEI,M,OC0BMC,MAnDf,WACE,IAAMC,EAAYC,iBAAO,MACnBC,EAAgBD,iBAAO,MACvBE,EAAgBF,iBAAO,MACvBG,EAAkBH,iBAAO,MACzBI,EAAaJ,iBAAO,MACpBK,EAAaL,iBAAO,MACpBM,EAAeN,iBAAO,MAC5B,EAA2BO,mBAAuB,MAAlD,mBAAOC,EAAP,KAAeC,EAAf,KAcA,OAZAlC,qBAAU,WACR,IAAMxB,EAASgD,EAAUtF,QACnBiD,EAAQ,IAAIZ,EAAMC,GACxBW,EAAM5B,WAAW4E,SAAST,EAAcxF,SACxCiD,EAAMnB,WAAWmE,SAASR,EAAczF,SACxCiD,EAAMxB,aAAawE,SAASP,EAAgB1F,SAC5CiD,EAAM5B,WAAW6E,UAAUP,EAAW3F,SACtCiD,EAAMnB,WAAWoE,UAAUN,EAAW5F,SACtCiD,EAAMxB,aAAayE,UAAUL,EAAa7F,SAC1CgG,EAAS/C,KACR,IAGD,qCACE,sBACEhC,MAAO,CACLkF,SAAU,QACVhF,KAAM,EACNC,IAAK,EACLgF,WAAY,OACZC,cAAe,QANnB,UASE,qBAAKC,IAAKd,IACV,qBAAKc,IAAKb,IACV,qBAAKa,IAAKZ,IACV,qBAAKY,IAAKX,EAAYY,UAAU,SAChC,qBAAKD,IAAKV,EAAYW,UAAU,SAChC,qBAAKD,IAAKT,EAAcU,UAAU,YAEpC,wBAAQD,IAAKhB,IACZS,EACC,qCACE,cAAC,EAAD,CAAkB9C,MAAO8C,IACzB,cAAC,EAAD,CAAmB9C,MAAO8C,OAE1B,SCrCKS,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCHdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1Bb,M","file":"static/js/main.c5452d7c.chunk.js","sourcesContent":["import * as THREE from \"three\";\nimport { SubPointer } from \"./PointerComponent\";\n\nclass Pointer {\n  active: boolean;\n  subPointers: null | Array<SubPointer>;\n  initial: THREE.Vector2;\n  current: THREE.Vector2;\n  diff: THREE.Vector2;\n  label: string;\n  logEl: null | HTMLElement;\n  markEl: null | HTMLElement;\n\n  constructor(label: string) {\n    this.label = label;\n    this.active = false;\n    this.subPointers = null;\n    this.initial = new THREE.Vector2();\n    this.current = new THREE.Vector2();\n    this.diff = new THREE.Vector2();\n    this.logEl = null;\n    this.markEl = null;\n  }\n\n  start(subPointers: Array<SubPointer>) {\n    this.active = true;\n  }\n\n  end() {\n    this.active = false;\n    this.current.set(0, 0);\n    this.diff.set(0, 0);\n  }\n\n  setLogEl(el: HTMLElement) {\n    this.logEl = el;\n    this.log();\n  }\n\n  log() {\n    if (this.logEl !== null) {\n      this.logEl.innerText =\n        this.label +\n        \" \" +\n        JSON.stringify(this.active) +\n        \" diff \" +\n        Math.round(this.diff.x) +\n        \",\" +\n        Math.round(this.diff.y);\n    }\n  }\n\n  setMarkEl(el: HTMLElement) {\n    this.markEl = el;\n    this.updateMark();\n  }\n\n  extras() {\n    this.log();\n    this.updateMark();\n  }\n\n  updateMark() {\n    if (this.markEl !== null) {\n      if (this.active) {\n        this.markEl.style.display = \"block\";\n      } else {\n        this.markEl.style.display = \"none\";\n      }\n      this.markEl.style.left = this.current.x + \"px\";\n      this.markEl.style.top = this.current.y + \"px\";\n    }\n  }\n}\n\nexport default Pointer;\n","import { SubPointer } from \"./PointerComponent\";\nimport Pointer from \"./Pointer\";\n\nclass PointerOne extends Pointer {\n  constructor(label: string) {\n    super(label);\n  }\n\n  start(subPointers: Array<SubPointer>) {\n    super.start(subPointers);\n    this.subPointers = subPointers;\n    const [p1] = this.subPointers;\n    this.initial.copy(p1.current);\n    this.current.copy(p1.current);\n    this.diff.set(0, 0);\n    super.extras();\n  }\n\n  move() {\n    if (this.subPointers) {\n      const [p1] = this.subPointers;\n      this.current.copy(p1.current);\n      this.diff.copy(this.current).sub(this.initial);\n\n      super.extras();\n    }\n  }\n\n  end() {\n    super.end();\n    super.extras();\n  }\n}\n\nexport default PointerOne;\n","import { SubPointer } from \"./PointerComponent\";\nimport Pointer from \"./Pointer\";\n\n// no between because it gets complicated\nclass PointerThree extends Pointer {\n  constructor(label: string) {\n    super(label);\n  }\n\n  start(subPointers: Array<SubPointer>) {\n    this.active = true;\n    this.subPointers = subPointers;\n    const [p1, p2, p3] = subPointers;\n\n    this.current\n      .copy(p1.current)\n      .add(p2.current)\n      .add(p3.current)\n      .divideScalar(3);\n    this.initial.copy(this.current);\n\n    this.diff.set(0, 0);\n    super.extras();\n  }\n\n  move() {\n    if (this.subPointers) {\n      const [p1, p2, p3] = this.subPointers;\n      this.current\n        .copy(p1.current)\n        .add(p2.current)\n        .add(p3.current)\n        .divideScalar(3);\n\n      this.diff.copy(this.current).sub(this.initial);\n      super.extras();\n    }\n  }\n\n  end() {\n    super.end();\n    super.extras();\n  }\n}\n\nexport default PointerThree;\n","import { SubPointer } from \"./PointerComponent\";\nimport * as THREE from \"three\";\nimport Pointer from \"./Pointer\";\n\nclass PointerTwo extends Pointer {\n  initialBetween: THREE.Vector2;\n  between: THREE.Vector2;\n\n  constructor(label: string) {\n    super(label);\n    this.between = new THREE.Vector2();\n    this.initialBetween = new THREE.Vector2();\n  }\n\n  start(subPointers: Array<SubPointer>) {\n    super.start(subPointers);\n    this.subPointers = subPointers;\n    const [p1, p2] = subPointers;\n\n    this.current.copy(p1.current).add(p2.current).divideScalar(2);\n    this.initial.copy(this.current);\n\n    this.between.copy(p1.current).sub(p2.current);\n    this.initialBetween.copy(this.between);\n\n    this.diff.set(0, 0);\n    super.extras();\n  }\n\n  move() {\n    if (this.subPointers) {\n      const [p1, p2] = this.subPointers;\n      this.current.copy(p1.current).add(p2.current).divideScalar(2);\n\n      this.between.copy(p1.current).sub(p2.current);\n\n      this.diff.copy(this.current).sub(this.initial);\n      super.extras();\n    }\n  }\n\n  end() {\n    super.end();\n    super.extras();\n  }\n}\n\nexport default PointerTwo;\n","import * as THREE from \"three\";\n\nclass PointerMiddle {\n  active: boolean;\n  initial: THREE.Vector2;\n  current: THREE.Vector2;\n  diff: THREE.Vector2;\n\n  constructor() {\n    this.active = false;\n    this.initial = new THREE.Vector2();\n    this.current = new THREE.Vector2();\n    this.diff = new THREE.Vector2();\n  }\n\n  start(e: PointerEvent) {\n    this.active = true;\n    this.current.set(e.clientX, e.clientY);\n    this.initial.copy(this.current);\n    this.diff.set(0, 0);\n  }\n\n  move(e: PointerEvent) {\n    this.current.set(e.clientX, e.clientY);\n    this.diff.copy(this.current).sub(this.initial);\n  }\n\n  end() {\n    this.active = false;\n    this.current.set(0, 0);\n    this.diff.set(0, 0);\n  }\n}\n\nexport default PointerMiddle;\n","import { SubPointer } from \"./PointerComponent\";\nimport PointerOne from \"./PointerOne\";\nimport PointerThree from \"./PointerThree\";\nimport PointerTwo from \"./PointerTwo\";\nimport PointerMiddle from \"./PointerMiddle\";\n\nclass State {\n  canvas: HTMLCanvasElement;\n  pressed: Array<string>;\n  pointers: Array<SubPointer>;\n  extraPointers: Array<SubPointer>;\n  PointerOne: PointerOne;\n  PointerTwo: PointerTwo;\n  PointerThree: PointerThree;\n  PointerMiddle: PointerMiddle;\n  lastPointerButtonPressed: number;\n\n  constructor(canvas: HTMLCanvasElement) {\n    this.canvas = canvas;\n    this.pressed = [];\n    this.pointers = [];\n    this.extraPointers = [];\n    this.PointerOne = new PointerOne(\"One\");\n    this.PointerTwo = new PointerTwo(\"Two\");\n    this.PointerThree = new PointerThree(\"Three\");\n    this.PointerMiddle = new PointerMiddle();\n    this.lastPointerButtonPressed = 0;\n\n    // init\n    this.canvas.width = window.innerWidth;\n    this.canvas.height = window.innerHeight;\n  }\n}\n\nexport default State;\n","import { useEffect } from \"react\";\nimport State from \"./State\";\nimport * as THREE from \"three\";\nimport PointerMiddle from \"./PointerMiddle\";\n\nexport class SubPointer {\n  state: State;\n  id: number;\n  current: THREE.Vector2;\n\n  constructor(state: State, e: PointerEvent) {\n    this.state = state;\n    this.id = e.pointerId;\n    this.current = new THREE.Vector2(e.clientX, e.clientY);\n\n    // left button\n    this.state.pointers.push(this);\n    switch (this.state.pointers.length) {\n      case 1:\n        // start 1\n        this.state.PointerOne.start(this.state.pointers.slice(0, 1));\n        break;\n      case 2:\n        // start 2\n        this.state.PointerOne.end();\n        this.state.PointerTwo.start(this.state.pointers.slice(0, 2));\n        break;\n      default:\n        // three or greater start three\n        this.state.PointerTwo.end();\n        this.state.PointerThree.start(this.state.pointers.slice(0, 3));\n    }\n  }\n\n  move(e: PointerEvent) {\n    this.current.set(e.clientX, e.clientY);\n    switch (this.state.pointers.length) {\n      case 1:\n        this.state.PointerOne.move();\n        break;\n      case 2:\n        this.state.PointerTwo.move();\n        break;\n      default:\n        this.state.PointerThree.move();\n        break;\n    }\n  }\n\n  remove() {\n    const index = getPointerIndexById(this.state, this.id);\n    if (index !== -1) {\n      this.state.pointers.splice(index, 1);\n    }\n    switch (this.state.pointers.length) {\n      case 0:\n        this.state.PointerOne.end();\n        break;\n      case 1:\n        // down to 1\n        this.state.PointerTwo.end();\n        this.state.PointerOne.start(this.state.pointers.slice(0, 1));\n        break;\n      case 2:\n        // down to 2\n        this.state.PointerThree.end();\n        this.state.PointerTwo.start(this.state.pointers.slice(0, 2));\n        break;\n      default:\n    }\n  }\n}\n\ntype PointerProps = {\n  state: State;\n};\n\nconst PointerComponent = ({ state }: PointerProps) => {\n  useEffect(() => {\n    const { canvas } = state;\n\n    const handlePointerMove = (e: PointerEvent) => {\n      if (state.lastPointerButtonPressed === 0) {\n        const pointer = getPointerById(state, e.pointerId);\n        if (pointer) {\n          pointer.move(e);\n        }\n      } else if (state.lastPointerButtonPressed === 1) {\n        if (state.PointerMiddle.active) {\n          state.PointerMiddle.move(e);\n        }\n      } else if (state.lastPointerButtonPressed === 2) {\n        // right\n      }\n    };\n\n    const handlePointerDown = (e: PointerEvent) => {\n      state.lastPointerButtonPressed = e.button;\n      if (state.lastPointerButtonPressed === 0) {\n        new SubPointer(state, e);\n        canvas.setPointerCapture(e.pointerId);\n      } else if (state.lastPointerButtonPressed === 1) {\n        state.PointerMiddle.start(e);\n      } else if (state.lastPointerButtonPressed === 2) {\n        // right\n      }\n      canvas.setPointerCapture(e.pointerId);\n    };\n\n    const handlePointerUp = (e: PointerEvent) => {\n      if (state.lastPointerButtonPressed === 0) {\n        const pointer = getPointerById(state, e.pointerId);\n        if (pointer) pointer.remove();\n        canvas.releasePointerCapture(e.pointerId);\n      } else if (state.lastPointerButtonPressed === 1) {\n        state.PointerMiddle.end();\n      } else if (state.lastPointerButtonPressed === 2) {\n        // right\n      }\n    };\n\n    const handleMousewheel = (e: Event) => {};\n\n    if (canvas) {\n      canvas.addEventListener(\"pointerdown\", handlePointerDown);\n      canvas.addEventListener(\"pointermove\", handlePointerMove);\n      canvas.addEventListener(\"pointerup\", handlePointerUp);\n      canvas.addEventListener(\"pointercancel\", handlePointerUp);\n      canvas.addEventListener(\"mousewheel\", handleMousewheel, {\n        passive: false,\n      });\n      return () => {\n        canvas.removeEventListener(\"pointerdown\", handlePointerDown);\n        canvas.removeEventListener(\"pointermove\", handlePointerMove);\n        canvas.removeEventListener(\"pointerup\", handlePointerUp);\n        canvas.removeEventListener(\"pointercancel\", handlePointerUp);\n        canvas.removeEventListener(\"mousewheel\", handleMousewheel);\n      };\n    }\n  }, []);\n\n  return null;\n};\n\nexport default PointerComponent;\n\nconst getPointerIndexById = (state: State, pointerId: number) => {\n  const ids = state.pointers.map((pointer) => pointer.id);\n  return ids.indexOf(pointerId);\n};\n\nconst getPointerById = (state: State, pointerId: number) => {\n  const index = getPointerIndexById(state, pointerId);\n  if (index > -1) {\n    return state.pointers[index];\n  } else {\n    return null;\n  }\n};\n","import { useEffect } from \"react\";\nimport State from \"./State\";\n\ntype KeyboardProps = {\n  state: State;\n};\n\nfunction Keyboard({ state }: KeyboardProps) {\n  useEffect(() => {\n    const downHandler = (e: KeyboardEvent) => {\n      let press = e.key.toLowerCase();\n      if (!e.repeat) state.pressed.push(press);\n    };\n\n    const upHandler = (e: KeyboardEvent) => {\n      let press = e.key.toLowerCase();\n      const index = state.pressed.indexOf(press);\n      if (index !== -1) {\n        state.pressed.splice(index, 1);\n      }\n    };\n\n    window.addEventListener(\"keydown\", downHandler);\n    window.addEventListener(\"keyup\", upHandler);\n    return () => {\n      window.removeEventListener(\"keydown\", downHandler);\n      window.removeEventListener(\"keyup\", upHandler);\n    };\n  }, []);\n\n  return null;\n}\n\nexport default Keyboard;\n","import { useEffect, useRef, useState } from \"react\";\nimport State from \"./State\";\nimport PointerComponent from \"./PointerComponent\";\nimport KeyboardComponent from \"./Keyboard\";\n\nfunction App() {\n  const canvasRef = useRef(null!);\n  const pointerOneRef = useRef(null!);\n  const pointerTwoRef = useRef(null!);\n  const pointerThreeRef = useRef(null!);\n  const markOneRef = useRef(null!);\n  const markTwoRef = useRef(null!);\n  const markThreeRef = useRef(null!);\n  const [_state, setState] = useState<null | State>(null);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const state = new State(canvas);\n    state.PointerOne.setLogEl(pointerOneRef.current);\n    state.PointerTwo.setLogEl(pointerTwoRef.current);\n    state.PointerThree.setLogEl(pointerThreeRef.current);\n    state.PointerOne.setMarkEl(markOneRef.current);\n    state.PointerTwo.setMarkEl(markTwoRef.current);\n    state.PointerThree.setMarkEl(markThreeRef.current);\n    setState(state);\n  }, []);\n\n  return (\n    <>\n      <div\n        style={{\n          position: \"fixed\",\n          left: 0,\n          top: 0,\n          userSelect: \"none\",\n          pointerEvents: \"none\",\n        }}\n      >\n        <div ref={pointerOneRef}></div>\n        <div ref={pointerTwoRef}></div>\n        <div ref={pointerThreeRef}></div>\n        <div ref={markOneRef} className=\"mark\"></div>\n        <div ref={markTwoRef} className=\"mark\"></div>\n        <div ref={markThreeRef} className=\"mark\"></div>\n      </div>\n      <canvas ref={canvasRef}></canvas>\n      {_state ? (\n        <>\n          <PointerComponent state={_state} />\n          <KeyboardComponent state={_state} />\n        </>\n      ) : null}\n    </>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}